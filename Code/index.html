<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="https://kurorosuke.github.io/homepoti/favicon.ico" />
    <link rel="stylesheet" href="main.css" />
    <title>è¤’ã‚ãƒãƒ</title>

    <!-- 1) Firebase compat ã‚’å¿…ãšå…ˆã« -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <!-- 3) ãã®å¾Œã« connectDB ã‚’é€šå¸¸ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ -->
    <script src="connectDB.js"></script>
</head>
<body>
    <!-- â˜… è¿½åŠ : ã‚³ã‚¤ãƒ³HUDï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«è¡¨ç¤ºï¼‰ -->
    <div id="coinHUD" aria-label="coin HUD" style="display:none;">
      ğŸª™ <span id="coinBalance">0</span>
    </div>

    <!-- åŠ¹æœéŸ³ï¼ˆä»»æ„ï¼‰ -->
    <audio id="ordersSound" preload="auto">
      <source src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA" type="audio/mpeg">
    </audio>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãªã‹ã£ãŸã‚‰è¡¨ç¤º -->
    <div style="text-align: center;" id="notSigned">
        <h3>ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„</h3>
        <button onclick="loginWithGoogle()">Googleã§ãƒ­ã‚°ã‚¤ãƒ³</button>
    </div>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãŸã‚‰è¡¨ç¤º: 3ã‚¿ãƒ– -->
    <div id="viewScreen" style="display:none;overflow-y:scroll;height:calc(100vh - 70px)">
        <button id="loadMoreBtn" style="display:none;">ã•ã‚‰ã«èª­ã¿è¾¼ã‚€</button>
    </div>

    <div id="postScreen" style="display:none;">
        <div class="InputForm">
        <textarea id="postTextInput" placeholder="ä»Šæ—¥ã¯ãªã«ã—ãŸï¼Ÿ" maxlength="280"></textarea>
        <div id="charCount">0</div>
        <input type="file" id="fileInput" accept="image/*" onchange="viewImageCanvas()">
        <canvas id="canvas" style="display:none;"></canvas>
        <button onclick="post()">æŠ•ç¨¿</button>
        </div>
    </div>

    <!-- â˜… æ–°è¦: è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç† -->
    <div id="servicesScreen" style="display:none;">
      <div class="InputForm">
        <h3>ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²</h3>
        <input id="svcTitle" class="svc-input" type="text" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" maxlength="40">
        <textarea id="svcDesc" class="svc-input" placeholder="èª¬æ˜" maxlength="200"></textarea>
        <input id="svcPrice" class="svc-input" type="number" min="0" step="1" placeholder="ä¾¡æ ¼ï¼ˆã‚³ã‚¤ãƒ³ï¼‰">
        <label class="svc-inline"><input id="svcActive" type="checkbox" checked> å…¬é–‹</label>
        <button id="svcAddBtn">è¿½åŠ  / æ›´æ–°</button>
      </div>

      <div class="InputForm">
        <h3>è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹</h3>
        <div id="myServicesList" class="svc-list"></div>
      </div>

      <div class="InputForm">
        <h3>å—ã‘ãŸæ³¨æ–‡ <span id="ordersBadge" class="badge" style="display:none;">0</span></h3>
        <div id="myOrdersList" class="order-list"></div>
      </div>
    </div>

    <!-- â˜… æ–°è¦: ãƒãƒ¼ã‚±ãƒƒãƒˆ -->
    <div id="marketScreen" style="display:none;">
      <div class="InputForm">
        <h3>ãƒãƒ¼ã‚±ãƒƒãƒˆ</h3>
        <div id="marketList" class="svc-list"></div>
      </div>
    </div>

    <div id="bottomNav" style="display: none;">
        <div class="navigater">
          <button class="nav_buttons" onclick="switchTab('view')" aria-label="ViewScreen">æŠ•ç¨¿</button>
        </div>
        <div class="divider"></div>
        <div class="navigater">
          <button class="nav_buttons" onclick="switchTab('post')" aria-label="PostScreen">æŠ•ç¨¿ã™ã‚‹</button>
        </div>
        <div class="divider"></div>
        <div class="navigater">
          <button class="nav_buttons" onclick="switchTab('services')" aria-label="ServicesScreen">ã‚µãƒ¼ãƒ“ã‚¹</button>
        </div>
        <div class="divider"></div>
        <div class="navigater">
          <button class="nav_buttons" onclick="switchTab('market')" aria-label="MarketScreen">ãƒãƒ¼ã‚±ãƒƒãƒˆ</button>
        </div>
    </div>

    <script>
        function switchTab(tab) {
          document.getElementById("viewScreen").style.display      = (tab === "view") ? "block" : "none";
          document.getElementById("postScreen").style.display      = (tab === "post") ? "block" : "none";
          document.getElementById("servicesScreen").style.display  = (tab === "services") ? "block" : "none";
          document.getElementById("marketScreen").style.display    = (tab === "market") ? "block" : "none";
        }
    </script>
    <script src="main.js"></script>
</body>
</html>
